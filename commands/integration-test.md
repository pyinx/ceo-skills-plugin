---
name: ceo:integration-test
description: 执行完整的前后端集成测试和E2E测试
---

# 集成测试命令

## 使用时机

在CEO workflow完成后，手动执行此命令进行集成测试

## 执行流程

1. **环境检查**
   - 检查项目结构
   - 检查依赖安装
   - 检查配置文件
   - 检查数据库连接（如需要）

2. **服务启动**
   - 启动后端服务
   - 启动前端服务
   - 验证服务健康状态

3. **API集成测试**
   - 测试所有API端点
   - 验证请求响应
   - 检查错误处理

4. **前端E2E测试**
   - 使用Chrome DevTools MCP
   - 执行用户故事场景
   - 截取测试截图
   - 检查控制台错误

5. **性能测试**
   - 测量LCP、FID、CLS
   - 分析页面加载时间
   - 生成性能报告

6. **生成报告**
   - 生成完整测试报告
   - 列出所有发现的问题
   - 提供修复建议

## 参数

```bash
# 默认执行完整测试
/ceo:integration-test

# 指定工作目录
/ceo:integration-test --worktree-path=./worktrees/feature-xyz

# 只执行E2E测试
/ceo:integration-test --e2e-only

# 只执行API测试
/ceo:integration-test --api-only

# 跳过性能测试
/ceo:integration-test --skip-performance

# 指定服务端口
/ceo:integration-test --backend-port=3001 --frontend-port=5174
```

## 输出文件

```
.claudedocs/integration-test-report.md  # 完整测试报告
.claudedocs/e2e-screenshots/           # E2E测试截图
.claudedocs/performance-trace.json     # 性能追踪数据
```

## 测试报告示例

```markdown
# 集成测试报告

生成时间: 2026-01-22T10:30:00Z

---

## 📊 测试概览

| 测试类型 | 结果 | 详情 |
|---------|------|------|
| 环境检查 | ✅ 通过 | 5/5 项通过 |
| 服务启动 | ✅ 通过 | 后端: ✅, 前端: ✅ |
| API集成测试 | ✅ 通过 | 12/12 端点通过 |
| E2E测试 | ⚠️ 部分通过 | 4/5 场景通过 |
| 性能测试 | ⚠️ 需优化 | 评分: 78/100 |

---

## 🐛 发现的问题

### E2E测试问题

#### 用户注册流程

**状态**: ❌ 失败
**步骤**: 3/4 步骤通过
**错误**: 找不到提交按钮

**修复建议**:
- 检查提交按钮的选择器是否正确
- 确认按钮在表单验证通过后才显示
- 检查按钮的disabled属性

---

## 💡 修复建议

1. **E2E测试失败**: 修复用户注册表单的提交按钮
2. **性能优化**: 优化首屏加载，LCP超过2500ms
```

## 注意事项

1. **环境要求**
   - Node.js 已安装
   - 后端和前端项目的依赖已安装
   - 数据库服务已启动（如需要）
   - 端口3000和5173未被占用

2. **执行时间**
   - 完整测试约需 5-10 分钟
   - E2E测试约需 3-5 分钟
   - 性能测试约需 1 分钟

3. **失败处理**
   - 如果环境检查失败，会给出修复建议
   - 如果服务启动失败，会尝试备用方案
   - 如果测试失败，会生成详细的错误报告

## 与CEO Workflow的关系

```
CEO Workflow (Phase 0-6) → 用户手动触发 → 集成测试 → 测试报告
                                                ↓
                                        修复问题 (可选)
```

集成测试是可选的，但强烈建议在交付前执行，确保系统可用性。
